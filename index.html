<!doctype html>
<html lang="en" data-bs-theme="dark">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>timecron</title>
        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
        <link rel="stylesheet" href="./style-login.css">

        <style>
            .timetable > .row {
                margin-left: 0;
                margin-right: 0;
            }

            .hours {
                width: 5%;
                height: max-content;
                padding-left: 0;
                padding-right: 0;
                border-left: 1px solid var(--tc-timetable-border-color);
            }

            .days {
                width: 95%;
                padding-left: 0;
                padding-right: 0;
                margin-left: 0;
                margin-right: 0;
            }

            .day {
                padding-left: 0;
                padding-right: 0;
                border-left: 1px solid var(--tc-timetable-border-color);
                --hours: calc(var(--end-hour) - var(--start-hour));
                --rows: calc(var(--resolution) * var(--hours));
                position: relative;
            }

            .day:last-child {
                border-right: 1px solid var(--tc-timetable-border-color);
            }

            .hour-grid,
            .day-hour-grid {
                --hours: calc(var(--end-hour) - var(--start-hour));
                --rows: calc(var(--resolution) * var(--hours));

                position: relative;

                display: grid;
                grid-template-columns: 1fr;
                grid-template-rows: repeat(var(--rows), 1fr);
                border-top: 1px solid var(--tc-timetable-border-color);
                border-bottom: 1px solid var(--tc-timetable-border-color);
            }

            .hour-grid-item {
                border-top: 1px dashed var(--tc-timetable-border-color);
                --start: 0;
                --end: 0;
                --start-row: ;

                grid-row-start: calc(
                    (var(--start) - var(--start-hour))
                    * var(--resolution)
                    + 1
                );
                grid-row-end: calc(
                    (var(--end) - var(--start-hour))
                    * var(--resolution)
                    + 1
                );

                display: grid;
                justify-content: center;
                text-align: center;
            }

            .hour-grid-item:first-child {
                border-top: none;
            }

            .hour-grid-item > .label {
                font-weight: bold;
                font-size: 1rem;
                margin-top: .5rem;
                margin-bottom: .5rem;
                align-self: center;
            }

            .hour-grid-item > .time {
                font-weight: 500;
                font-size: .8rem;
            }

            .hour-grid-item > .start-time {
                align-self: self-start;
            }

            .hour-grid-item > .end-time {
                align-self: self-end;
            }

            .break {
                background-color: var(--tc-input-bg);
            }

            .event-grid-item {
                --start: 0;
                --end: 0;
                --start-row: ;

                grid-row-start: calc(
                    (var(--start) - var(--start-hour))
                    * var(--resolution)
                    + 1
                );
                grid-row-end: calc(
                    (var(--end) - var(--start-hour))
                    * var(--resolution)
                    + 1
                );

                padding: calc(6 / 8 * 16px);
                /* border-radius: calc(2 / 3 * 24px); */

                background: var(--tc-default);
                border: 1px solid var(--tc-content-border-color);
                cursor: pointer;
            }

            .event-grid-item > .label {
                font-weight: 500;
            }

            .day-event-grid {
                display: grid;
                grid-auto-columns: 1fr;
                column-gap: .2rem;
                /* grid-template-columns: repeat(3, minmax(0, 1fr)); */
                grid-template-rows: repeat(var(--rows), 1fr);

                /* left: calc(2 * var(--left-margin)); */
                margin: 0 .2rem 0 .2rem;
            }

            .day > * {
                position: absolute;
                left: 0;
                right: 0;
                bottom: 0;
                top: 0;
            }

            .day-title {
                display: grid;
                text-align: center;
                padding-bottom: .25rem;
                padding-left: 0;
                padding-right: 0;
                border-top: 1px solid var(--tc-timetable-border-color);
                border-left: 1px solid var(--tc-timetable-border-color);
            }

            .day-title:last-child {
                border-right: 1px solid var(--tc-timetable-border-color);
            }

            .day-title > .date {
                font-size: larger;
                color: var(--tc-default-text-color);
            }

            .day-title > .weekday {
                font-size: small;
                color: var(--bs-secondary-color);
            }
        </style>
    </head>
    <body>
        <header class="navbar navbar-expand-lg bd-navbar sticky-top bg-default bg-content">
            <nav class="container-xxl bd-gutter flex-wrap flex-lg-nowrap" aria-label="Main navigation">
                <a class="navbar-brand p-0 me-0 me-lg-2" id="navbar-icon" href="/" aria-label="Bootstrap">
                    <img src="./timecron-icon.svg" alt="timecron" class="svg-icon" height="32px">
                </a>
                <div class="bd-navbar-toggle">
                    <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#bdSidebar" aria-controls="bdSidebar" aria-label="Toggle docs navigation">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi" fill="currentColor" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path>
                        </svg>
                        <span class="d-none fs-6 pe-1">Browse</span>
                  </button>
                </div>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <div class="offcanvas-lg offcanvas-end flex-grow-1" tabindex="-1" id="bdNavbar" aria-labelledby="bdNavbarOffcanvasLabel" data-bs-scroll="true">
                        <div class="offcanvas-header px-4 pb-0">
                            <h5 class="offcanvas-title text-white" id="bdNavbarOffcanvasLabel">Bootstrap</h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close" data-bs-target="#bdNavbar"></button>
                        </div>
                        
                        <div class="offcanvas-body p-4 pt-0 p-lg-0">
                            <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav">
                                <li class="nav-item px-1 active">
                                    <a class="nav-link px-3" href="">Timetable</a>
                                </li>
                                <li class="nav-item px-1">
                                    <a class="nav-link px-3" href="">Rooms</a>
                                </li>
                            </ul>
                            <ul class="navbar-nav flex-row flex-wrap ms-md-auto">
                                <li class="nav-item dropdown">
                                    <button class="btn btn-link nav-link py-2 px-0 px-lg-2 dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" data-bs-display="static">
                                        Profil
                                    </button>
                                  
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><button class="dropdown-item d-flex align-items-center"><i class="fa-solid fa-sun fa-fw me-2 opacity-50"></i>Light</button></li>
                                        <li><button class="dropdown-item d-flex align-items-center active"><i class="fa-solid fa-moon fa-fw me-2 opacity-50"></i>Dark<i class="fa-solid fa-check fa-fw ms-auto"></i></button></li>
                                        <li><button class="dropdown-item d-flex align-items-center"><i class="fa-solid fa-circle-half-stroke fa-fw me-2 opacity-50"></i>Auto</button></li>
                                    </ul>
                                </li>
                                <li class="nav-item py-2 py-lg-1 col-12 col-lg-auto">
                                    <div class="vr d-none d-lg-flex h-100 mx-lg-2 text-white"></div>
                                    <hr class="d-lg-none my-2 text-white-50">
                                </li>
                                <li class="nav-item dropdown">
                                    <button class="btn btn-link nav-link py-2 px-0 px-lg-2 dropdown-toggle d-flex align-items-center" type="button" data-bs-toggle="dropdown" aria-expanded="false" data-bs-display="static">
                                        <i class="fa-solid fa-circle-half-stroke fa-fw my-1" id="nav-icon-active-theme"></i>
                                    </button>
                                    
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><button class="dropdown-item d-flex align-items-center btn-theme rounded-pill"><i class="fa-solid fa-sun fa-fw me-2 opacity-75"></i>Light</button></li>
                                        <li><button class="dropdown-item d-flex align-items-center btn-theme rounded-pill"><i class="fa-solid fa-moon fa-fw me-2 opacity-75"></i>Dark</i></button></li>
                                        <li><button class="dropdown-item d-flex align-items-center btn-theme rounded-pill"><i class="fa-solid fa-circle-half-stroke fa-fw me-2 opacity-75"></i>Auto</button></li>                        
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        <template id="template-hour-item">
            <div class="hour-grid-item">
                <span class="time start-time"></span>
                <p class="label"></p>
                <span class="time end-time"></span>
            </div>
        </template>
        <template id="template-event-item">
            <div class="event-grid-item rounded">
                <span class="time start-time"></span>
                <p class="label"></p>
                <span class="time end-time"></span>
            </div>
        </template>

        <div class="container py-2">
            <div class="timetable bg-content p-2 rounded">
                <div class="row">
                    <div class="hours">
                        
                    </div>
                    <div class="days row">
                        <div class="day-title col">
                            <span class="date">23</span>
                            <span class="weekday">Monday</span>
                        </div>
                        <div class="day-title col">
                            <span class="date">24</span>
                            <span class="weekday">Tuesday</span>
                        </div>
                        <div class="day-title col">
                            <span class="date">25</span>
                            <span class="weekday">Wednesday</span>
                        </div>
                        <div class="day-title col">
                            <span class="date">26</span>
                            <span class="weekday">Thursday</span>
                        </div>
                        <div class="day-title col">
                            <span class="date">27</span>
                            <span class="weekday">Friday</span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="hours">
                        <div class="hour-grid"></div>
                    </div>
                    <div class="days row">
                        <div class="day col">
                            <div class="day-hour-grid"></div>
                            <div class="day-event-grid"></div>
                        </div>
                        <div class="day col">
                            <div class="day-hour-grid"></div>
                            <div class="day-event-grid"></div>
                        </div>
                        <div class="day col">
                            <div class="day-hour-grid"></div>
                            <div class="day-event-grid"></div>
                        </div>
                        <div class="day col">
                            <div class="day-hour-grid"></div>
                            <div class="day-event-grid"></div>
                        </div>
                        <div class="day col">
                            <div class="day-hour-grid"></div>
                            <div class="day-event-grid"></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script>
            'use strict'
            const getPreferredTheme = () => {
                var storedTheme = localStorage.getItem("theme");
                if (storedTheme) {
                    return storedTheme;
                }
                localStorage.setItem("theme", "auto");
                return "auto";
            }

            const setTheme = function (theme) {
                switch (theme) {
                    case "light":
                        document.querySelector("#nav-icon-active-theme").className = "fa-solid fa-sun fa-fw my-1";
                        break;
                    case "dark":
                        document.querySelector("#nav-icon-active-theme").className = "fa-solid fa-moon fa-fw my-1";
                        break;
                    default:
                        document.querySelector("#nav-icon-active-theme").className = "fa-solid fa-circle-half-stroke fa-fw my-1";
                }

                if (theme === "auto" && window.matchMedia("(prefers-color-scheme: dark)").matches || theme === "dark") {
                    document.documentElement.setAttribute("data-bs-theme", "dark");
                } else if (theme === "auto" && window.matchMedia("(prefers-color-scheme: light)").matches || theme === "light") {
                    document.documentElement.setAttribute("data-bs-theme", "light");
                }
            }

            var selectedTheme = getPreferredTheme();
            setTheme(selectedTheme);

            window.addEventListener("DOMContentLoaded", (event) => {
                // MediaQueryList
                const darkModePreference = window.matchMedia("(prefers-color-scheme: dark)");

                // recommended method for newer browsers: specify event-type as first argument
                darkModePreference.addEventListener("change", e => {
                    if (localStorage.getItem("theme") !== "auto") {
                        return;
                    }
                    if (e.matches) {
                        setTheme("dark");
                    } else {
                        setTheme("light");
                    }
                });
                
                document.querySelectorAll(".btn-theme").forEach(btn => {
                    if (btn.innerText.toLowerCase() == selectedTheme) {
                        const iconActiveTheme = document.createElement("i");
                        iconActiveTheme.id = "icon-active-theme";
                        iconActiveTheme.className = "fa-solid fa-check fa-fw ms-auto";
                        btn.appendChild(iconActiveTheme);
                        btn.classList.add("active");
                    }

                    btn.addEventListener("click", () => {
                        if (btn.classList.contains("active")) {
                            return;
                        }
                        document.querySelectorAll(".btn-theme").forEach(btn => btn.classList.remove("active"));
                        btn.classList.add("active");
                        var iconActiveTheme = document.querySelector("#icon-active-theme");
                        btn.appendChild(iconActiveTheme.cloneNode(true));
                        iconActiveTheme.remove();
                        var theme = btn.innerText.toLowerCase();
                        localStorage.setItem("theme", theme);
                        setTheme(theme);
                    });
                });

                const startHour = 8;
                const endHour = 19;
                const resolution = 100;
                const currentHour = 12;
                const currentMinute = 15;

                const hours = [
                    {
                        start: "08:00",
                        end: "09:30",
                        title: "1"
                    },
                    {
                        start: "09:30",
                        end: "09:45",
                        title: ""
                    },
                    {
                        start: "09:45",
                        end: "11:15",
                        title: "2"
                    },
                    {
                        start: "11:15",
                        end: "11:30",
                        title: ""
                    },
                    {
                        start: "11:30",
                        end: "13:00",
                        title: "3"
                    },
                    {
                        start: "13:00",
                        end: "14:00",
                        title: ""
                    },
                    {
                        start: "14:00",
                        end: "15:30",
                        title: "4"
                    },
                    {
                        start: "15:30",
                        end: "15:45",
                        title: ""
                    },
                    {
                        start: "15:45",
                        end: "17:15",
                        title: "5"
                    },
                    {
                        start: "17:15",
                        end: "17:30",
                        title: ""
                    },
                    {
                        start: "17:30",
                        end: "19:00",
                        title: "6"
                    },
                ];

                const events = [
                    {
                        start: "08:00",
                        end: "9:30",
                        title: 'Focus Time'
                    },
                    {
                        start: "11:30",
                        end: "13:00",
                        title: '1:1 with Tamika'
                    },
                    {
                        start: "14:00",
                        end: "17:15",
                        title: 'Technical Weekly'
                    },
                ];

                document.querySelectorAll(".hour-grid, .day-hour-grid, .day").forEach(hourGrid => {
                    hourGrid.style.setProperty('--start-hour', startHour);
                    hourGrid.style.setProperty('--end-hour', endHour);
                    hourGrid.style.setProperty('--resolution', resolution);
                });

                function convertTimeToDecimal(timeString) {
                    const [hours, minutes] = timeString.split(':').map(Number);
                    return hours + (minutes / 60);
                }

                function convertDecimalToTime(decimalTime) {
                    const hours = Math.floor(decimalTime);
                    const minutes = (decimalTime - hours) * 60;
                    const paddedMinutes = String(minutes).padStart(2, '0');
                    return `${String(hours).padStart(2, '0')}:${paddedMinutes}`;
                }

                const hourItemTemplate = document.querySelector("#template-hour-item");
                hours.forEach(hourItem => {
                    const hourNode = hourItemTemplate.content.firstElementChild.cloneNode(true);
                    document.querySelector(".hour-grid").appendChild(hourNode);

                    hourNode.querySelector('.label').innerText = hourItem.title;
                    
                    if (hourItem.title !== "") {
                        hourNode.querySelector(".start-time").innerText = hourItem.start;
                        hourNode.querySelector(".end-time").innerText = hourItem.end;
                    } else {
                        hourNode.classList.add("break");
                    }

                    hourNode.style.setProperty('--start', convertTimeToDecimal(hourItem.start));
                    hourNode.style.setProperty('--end', convertTimeToDecimal(hourItem.end));
                });

                document.querySelectorAll(".day-hour-grid").forEach(hourGrid => {
                    hours.forEach(hourItem => {
                        const hourNode = hourItemTemplate.content.firstElementChild.cloneNode(true);
                        hourGrid.appendChild(hourNode);
                        
                        if (hourItem.title === "") {
                            hourNode.classList.add("break");
                        }

                        hourNode.style.setProperty('--start', convertTimeToDecimal(hourItem.start));
                        hourNode.style.setProperty('--end', convertTimeToDecimal(hourItem.end));
                    });
                });

                const eventItemTemplate = document.querySelector('#template-event-item');
                document.querySelectorAll(".day-event-grid").forEach(day => {
                    events.forEach((event) => {
                        const eventNode = eventItemTemplate.content.firstElementChild.cloneNode(true);
                        day.appendChild(eventNode);

                        eventNode.querySelector('.label').innerText = event.title;
                        eventNode.style.setProperty('--start', convertTimeToDecimal(event.start));
                        eventNode.style.setProperty('--end', convertTimeToDecimal(event.end));
                    });
                });
                
            });
        </script>
    </body>
</html>
